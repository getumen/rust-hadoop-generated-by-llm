ğŸµ Starting Chaos Monkey Test for Rust Hadoop DFS
==================================================

Phase 1: Initial Setup
======================
ğŸ“ Creating test data...
âœ“ Created 10MB test file
ğŸ“¤ Uploading file to DFS...
Failed to create file: Not Leader
âœ“ File uploaded
ğŸ“‹ Listing files in DFS...

ğŸ“Š Cluster Status:
==================
  âœ“ chunkserver1: RUNNING
  âœ“ chunkserver2: RUNNING
  âœ“ chunkserver3: RUNNING
  âœ“ chunkserver4: RUNNING
  âœ“ chunkserver5: RUNNING


Phase 2: Chaos Testing
======================

Test 1: Single server failure
------------------------------
ğŸ’€ Killing chunkserver4...
âœ“ chunkserver4 stopped

ğŸ“Š Cluster Status:
==================
  âœ“ chunkserver1: RUNNING
  âœ“ chunkserver2: RUNNING
  âœ“ chunkserver3: RUNNING
  âœ— chunkserver4: STOPPED
  âœ“ chunkserver5: RUNNING

ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to download1.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
â™»ï¸  Restarting chunkserver4...
time="2025-11-30T10:42:04+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver4  Starting
 Container dfs-chunkserver4  Started
âœ“ chunkserver4 restarted

ğŸ“Š Cluster Status:
==================
  âœ“ chunkserver1: RUNNING
  âœ“ chunkserver2: RUNNING
  âœ“ chunkserver3: RUNNING
  âœ“ chunkserver4: RUNNING
  âœ“ chunkserver5: RUNNING


Test 2: Two server failures
---------------------------
ğŸ’€ Killing chunkserver4...
âœ“ chunkserver4 stopped
ğŸ’€ Killing chunkserver3...
âœ“ chunkserver3 stopped

ğŸ“Š Cluster Status:
==================
  âœ“ chunkserver1: RUNNING
  âœ“ chunkserver2: RUNNING
  âœ— chunkserver3: STOPPED
  âœ— chunkserver4: STOPPED
  âœ“ chunkserver5: RUNNING

ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to download2.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
â™»ï¸  Restarting chunkserver4...
time="2025-11-30T10:42:31+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver4  Starting
 Container dfs-chunkserver4  Started
âœ“ chunkserver4 restarted
â™»ï¸  Restarting chunkserver3...
time="2025-11-30T10:42:34+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver3  Starting
 Container dfs-chunkserver3  Started
âœ“ chunkserver3 restarted

ğŸ“Š Cluster Status:
==================
  âœ“ chunkserver1: RUNNING
  âœ“ chunkserver2: RUNNING
  âœ“ chunkserver3: RUNNING
  âœ“ chunkserver4: RUNNING
  âœ“ chunkserver5: RUNNING


Test 3: Rolling failures (kill and restart repeatedly)
-------------------------------------------------------
Round 1/5:
ğŸ’€ Killing chunkserver5...
âœ“ chunkserver5 stopped
ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to download_rolling_1.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
â™»ï¸  Restarting chunkserver5...
time="2025-11-30T10:42:51+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver5  Starting
 Container dfs-chunkserver5  Started
âœ“ chunkserver5 restarted
Round 2/5:
ğŸ’€ Killing chunkserver1...
âœ“ chunkserver1 stopped
ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to download_rolling_2.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
â™»ï¸  Restarting chunkserver1...
time="2025-11-30T10:43:09+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver1  Starting
 Container dfs-chunkserver1  Started
âœ“ chunkserver1 restarted
Round 3/5:
ğŸ’€ Killing chunkserver4...
âœ“ chunkserver4 stopped
ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to download_rolling_3.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
â™»ï¸  Restarting chunkserver4...
time="2025-11-30T10:43:28+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver4  Starting
 Container dfs-chunkserver4  Started
âœ“ chunkserver4 restarted
Round 4/5:
ğŸ’€ Killing chunkserver2...
âœ“ chunkserver2 stopped
ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to download_rolling_4.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
â™»ï¸  Restarting chunkserver2...
time="2025-11-30T10:43:46+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver2  Starting
 Container dfs-chunkserver2  Started
âœ“ chunkserver2 restarted
Round 5/5:
ğŸ’€ Killing chunkserver3...
âœ“ chunkserver3 stopped
ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to download_rolling_5.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
â™»ï¸  Restarting chunkserver3...
time="2025-11-30T10:44:04+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver3  Starting
 Container dfs-chunkserver3  Started
âœ“ chunkserver3 restarted

ğŸ“Š Cluster Status:
==================
  âœ“ chunkserver1: RUNNING
  âœ“ chunkserver2: RUNNING
  âœ“ chunkserver3: RUNNING
  âœ“ chunkserver4: RUNNING
  âœ“ chunkserver5: RUNNING


Test 4: Upload new file during partial outage
----------------------------------------------
ğŸ’€ Killing chunkserver1...
âœ“ chunkserver1 stopped

ğŸ“Š Cluster Status:
==================
  âœ— chunkserver1: STOPPED
  âœ“ chunkserver2: RUNNING
  âœ“ chunkserver3: RUNNING
  âœ“ chunkserver4: RUNNING
  âœ“ chunkserver5: RUNNING

Creating second test file...
Uploading during chaos...
Failed to create file: Not Leader
â™»ï¸  Restarting chunkserver1...
time="2025-11-30T10:44:21+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-chunkserver1  Starting
 Container dfs-chunkserver1  Started
âœ“ chunkserver1 restarted

ğŸ“Š Cluster Status:
==================
  âœ“ chunkserver1: RUNNING
  âœ“ chunkserver2: RUNNING
  âœ“ chunkserver3: RUNNING
  âœ“ chunkserver4: RUNNING
  âœ“ chunkserver5: RUNNING


Phase 3: Final Verification
===========================
ğŸ“¥ Downloading file from DFS...
File not found
âœ“ File downloaded to final_download.txt
ğŸ” Verifying file integrity...
âœ“ File integrity verified
ğŸ“‹ Listing files in DFS...

ğŸ‰ Chaos Monkey Test Completed Successfully!
============================================
Summary:
  - Original file maintained integrity through multiple server failures
  - Replication factor of 3 provided sufficient redundancy
  - System recovered gracefully from failures

ğŸ§¹ Cleaning up test files...
âœ“ Cleanup complete
=== Test 5: Master Failure Test ===
Killing a random master...
time="2025-11-30T10:44:25+09:00" level=warning msg="/Users/ynakazat/ghe/ynakazat/rust-hadoop/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container dfs-master1  Stopping
 Container dfs-master1  Stopped
Stopped master1
Attempting to list files (should failover)...
ğŸ“‹ Listing files in DFS...
Failed to connect to master http://dfs-master1:50051: transport error
Attempting to upload file during master outage...
ğŸ“¤ Uploading file to DFS...
